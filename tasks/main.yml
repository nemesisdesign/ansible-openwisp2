### openwisp2
## tasks
- include: apt.yml
  tags: [openwisp2, apt]
  when: ansible_distribution != 'CentOS' and ansible_distribution != 'Red Hat Enterprise Linux'

- include: yum_centos.yml
  tags: [openwisp2, yum]
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

- include: pip.yml
  tags: [openwisp2, pip]

- name: Set www user (Debian)
  set_fact:
    www_group: 'www-data'
    www_user:  'www-data'
  when: ansible_distribution != 'CentOS' and ansible_distribution != 'Red Hat Enterprise Linux'

- name: Set www user (RedHat)
  set_fact:
    www_group: 'nginx'
    www_user:  'nginx'
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

# comprises django_secret_key.yml
- include: django.yml
  tags: [openwisp2, django]

- include: firewalld_centos.yml
  tags: [openwisp2, firewalld]
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

- include: selinux_centos.yml
  tags: [openwisp2, selinux]
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

- include: supervisor.yml
  tags: [openwisp2, supervisor]

- include: nginx.yml
  tags: [openwisp2, nginx]
